# 連鎖行列積問題の解説

このドキュメントでは、動的計画法を使用して連鎖行列積問題を解くCプログラム `algo-data-24-1.c` について解説します。

## 概要

このプログラムは、`n` 個の行列の連鎖を乗算するために必要なスカラー乗算の最小回数を決定します。乗算の順序（括弧の付け方）によって計算コストが変わるため、このプログラムは最適な順序を見つけます。

## アルゴリズムの解説：連鎖行列積問題 (Matrix Chain Multiplication)

行列の積 $A \times B$ を計算する際、行列 $A$ が $p \times q$、行列 $B$ が $q \times r$ の次元を持つ場合、スカラー乗算の回数は $p \times q \times r$ 回になります。3つ以上の行列の積 $A \times B \times C$ を計算する場合、$(A \times B) \times C$ と $A \times (B \times C)$ では、最終的な結果は同じ行列になりますが、計算コスト（乗算回数）は大きく異なる場合があります。

**動的計画法による解法:**
この問題も動的計画法（DP）で効率的に解くことができます。
-   **部分問題:** `M[i][j]` を「行列 $A_i$ から $A_j$ までの連鎖積を計算する最小コスト」と定義します。
-   **分割:** 積 $A_i \dots A_j$ を計算する際、ある位置 $k$ ($i \le k < j$) で分割して $(A_i \dots A_k) \times (A_{k+1} \dots A_j)$ と計算すると考えます。
-   **漸化式:**
    $$M[i][j] = \min_{i \le k < j} \{ M[i][k] + M[k+1][j] + \text{cost}(A_{i \dots k} \times A_{k+1 \dots j}) \}$$
    ここで、コストは `row[i] * column[k] * column[j]` となります。
-   連鎖の長さが短い順（部分問題）から計算し、最終的に全体の最小コスト $M[0][n-1]$ を求めます。

## 主な構成要素

### 1. `Matrix_Chain` 関数

-   **引数:**
    -   `int *row`, `int *column`: 行列の次元を格納する配列。行列 `i` の次元は `row[i] x column[i]` です。
    -   `int n`: 行列の数。

-   **DPテーブル `M`:**
    -   `M[i][j]` は、インデックス `i` から `j` までの行列の積を計算するために必要な最小乗算回数を格納します。
    -   **基本ケース:** `M[i][i] = 0` （単一の行列に乗算は不要）。

-   **ロジック:**
    -   連鎖の長さ `w` （1から `n-1` まで）を増やしながらループします。
    -   `i` で始まり `j = i + w` で終わる長さ `w` の各連鎖について:
        -   `i` と `j` の間のすべての可能な分割点 `k` を反復処理します。
        -   分割点 `k` におけるコスト `m` を計算します:
            `m = M[i][k] + M[k+1][j] + row[i] * column[k] * column[j]`
            -   `M[i][k]`: 左側の部分連鎖のコスト。
            -   `M[k+1][j]`: 右側の部分連鎖のコスト。
            -   `row[i] * column[k] * column[j]`: 結果として得られる2つの行列を乗算するコスト。
        -   見つかった最小コストで `M[i][j]` を更新します。

-   **戻り値:**
    -   全体の連鎖に対する最小コストである `M[0][n-1]` を返します。

### 2. `main` 関数

-   `n` （行列の数）を読み込みます。
-   各行列の次元（`row[i]`, `column[i]`）を読み込みます。
-   `Matrix_Chain` を呼び出し、結果を出力します。

## 入出力形式

**入力:**
-   1行目：整数 `n`。
-   続く `n` 行：各行2つの整数、各行列の行数と列数。

**出力:**
-   最小乗算回数を表す1つの整数。
